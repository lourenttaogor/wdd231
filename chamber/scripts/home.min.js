document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("currentYear");e&&(e.textContent=new Date().getFullYear());let t=document.getElementById("lastModified");t&&(t.textContent=document.lastModified);let a=document.querySelector("#ham-btn"),r=document.querySelector(".navigation");if(a.addEventListener("click",()=>{a.classList.toggle("show"),r.classList.toggle("show")}),window.addEventListener("scroll",()=>{window.innerWidth>=608&&window.scrollY>0?r.classList.add("fixed"):r.classList.remove("fixed")}),document.querySelector(".home-main")){let n="5071297ee1335c91dacb2564bdc298cf";async function i(){let e=`https://api.openweathermap.org/data/2.5/weather?lat=5.55&lon=5.77&units=metric&appid=${n}`,t=`https://api.openweathermap.org/data/2.5/forecast?lat=5.55&lon=5.77&units=metric&appid=${n}`;try{let a=await fetch(e);if(!a.ok)throw Error(`HTTP error! status: ${a.status} from current weather`);let r=await a.json();document.getElementById("current-temp").textContent=r.main.temp.toFixed(0),document.getElementById("weather-desc").textContent=r.weather[0].description.split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");let i=await fetch(t);if(!i.ok)throw Error(`HTTP error! status: ${i.status} from forecast`);let s=await i.json();o(s)}catch(l){console.error("Error fetching weather data:",l),document.getElementById("current-temp").textContent="N/A",document.getElementById("weather-desc").textContent="Failed to load weather",document.getElementById("forecast-container").innerHTML="<p>Failed to load forecast.</p>"}}function o(e){let t=document.getElementById("forecast-container");t.innerHTML="<h4>3-Day Forecast:</h4>";let a={};if(e&&Array.isArray(e.list))e.list.forEach(e=>{let t=new Date(1e3*e.dt),r=t.toDateString();a[r]||(a[r]={temp:e.main.temp,description:e.weather[0].description,icon:e.weather[0].icon})});else{console.warn("Forecast data list is missing or not an array:",e),t.innerHTML+="<p>No forecast data available.</p>";return}let r=Object.keys(a).slice(0,3);r.forEach(e=>{let r=a[e],n=document.createElement("div");n.classList.add("forecast-day");let i=new Date(e);n.innerHTML=`
                    <p><strong>${i.toLocaleDateString("en-US",{weekday:"short"})}</strong></p>
                    <img src="https://openweathermap.org/img/wn/${r.icon}.png" alt="${r.description}">
                    <p>${r.temp.toFixed(0)}\xb0C</p>
                    <p class="description">${r.description}</p>
                `,t.appendChild(n)})}i();let s=[];async function l(){try{let e=await fetch("members.json");if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);s=await e.json(),d(s)}catch(t){console.error("Error fetching member data:",t),document.getElementById("spotlight-grid").innerHTML="<p>Failed to load member spotlights. Please try again later.</p>"}}function d(e){let t=document.getElementById("spotlight-grid");t.innerHTML="";let a=e.filter(e=>"Gold"===e.membershipLevel||"Silver"===e.membershipLevel);if(a.length<2){t.innerHTML="<p>Not enough Gold or Silver members to display spotlights.</p>";return}a.forEach(e=>{let a=document.createElement("div");a.classList.add("spotlight-card"),a.innerHTML=`
                    <img src="${e.image}" alt="${e.name} Logo">
                    <h3>${e.name}</h3>
                    <p>${e.address}</p>
                    <p>${e.phone}</p>
                    <p><a href="${e.website}" target="_blank">${e.website.replace(/(^\w+:|^)\/\//,"")}</a></p>
                    <p class="membership-level">${e.membershipLevel} Member</p>`,t.appendChild(a)})}l()}});